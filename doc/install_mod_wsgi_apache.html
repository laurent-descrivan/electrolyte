<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0102)http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/modwsgi/index.html#modwsgi-tutorial -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    
    <title>Running a Pyramid Application under mod_wsgi — The Pyramid Web Framework v1.6.dev0</title>
    
    <link rel="stylesheet" href="./install_mod_wsgi_apache_files/pylons.css" type="text/css">
    <link rel="stylesheet" href="./install_mod_wsgi_apache_files/pygments.css" type="text/css">
    <link rel="stylesheet" href="./install_mod_wsgi_apache_files/badge_only.css" type="text/css">
    <link rel="stylesheet" href="./install_mod_wsgi_apache_files/readthedocs-doc-embed.css" type="text/css">
    
    <script type="text/javascript" async="" src="./install_mod_wsgi_apache_files/ga.js"></script><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.6.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><style type="text/css"></style>
    <script type="text/javascript" src="./install_mod_wsgi_apache_files/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="./install_mod_wsgi_apache_files/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="./install_mod_wsgi_apache_files/underscore.js"></script>
    <script type="text/javascript" src="./install_mod_wsgi_apache_files/doctools.js"></script>
    <script type="text/javascript" src="./install_mod_wsgi_apache_files/readthedocs-doc-embed.js"></script>
    <link rel="copyright" title="Copyright" href="http://docs.pylonsproject.org/projects/pyramid/en/master/copyright.html">
    <link rel="top" title="The Pyramid Web Framework v1.6.dev0" href="http://docs.pylonsproject.org/projects/pyramid/en/master/index.html">
    <link rel="next" title="API Documentation" href="http://docs.pylonsproject.org/projects/pyramid/en/master/api/index.html">
    <link rel="prev" title="Distributing Your Application" href="http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/wiki/distributing.html">

<link rel="stylesheet" href="./install_mod_wsgi_apache_files/stylesheet.css" type="text/css" media="screen" charset="utf-8">
<link rel="stylesheet" href="./install_mod_wsgi_apache_files/stylesheet(1).css" type="text/css" media="screen" charset="utf-8">
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="http://docs.pylonsproject.org/projects/pyramid/en/master/_static/pyramid.ico">

<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="http://docs.pylonsproject.org/en/latest/tutorials/modwsgi/">
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "pyramid",
    version: "master",
    language: "en",
    page: "tutorials/modwsgi/index",
    builder: "sphinx",
    theme: "pyramid",
    docroot: "/docs/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org",
    commit: "6c1a1c60123d150a41fef3062df9a64b995305c5"
  }
  // Old variables
  var doc_version = "master";
  var doc_slug = "pyramid";
  var page_name = "tutorials/modwsgi/index";
  var html_theme = "pyramid";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);

  // User Analytics Code
  _gaq.push(['user._setAccount', 'UA-21146943-2']);
  _gaq.push(['user._trackPageview']);
  // End User Analytics Code


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body>


    <img style="position: fixed; display: block; width: 165px; height: 165px; bottom: 60px; right: 0; border: 0;" src="./install_mod_wsgi_apache_files/in_progress.png" alt="Documentation in progress">





<a href="https://github.com/Pylons/pyramid/blob/master/docs/tutorials/modwsgi/index.rst"><img style="position: absolute; top: 0; right: 0; border: 0;" src="./install_mod_wsgi_apache_files/edit-me-on-github.png" alt="Edit me on GitHub"></a>


<div class="header-small">
	
	<div class="logo-small">
		<a href="http://docs.pylonsproject.org/projects/pyramid/en/master/index.html">
      		<img class="logo" src="./install_mod_wsgi_apache_files/pyramid-small.png" alt="Logo">
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/genindex.html" title="General Index" accesskey="I">index</a></li>
        <li class="right">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/py-modindex.html" title="Python Module Index">modules</a> |</li>
        <li class="right">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/api/index.html" title="API Documentation" accesskey="N">next</a> |</li>
        <li class="right">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/wiki/distributing.html" title="Distributing Your Application" accesskey="P">previous</a> |</li>
    	<li><a href="http://docs.pylonsproject.org/projects/pyramid/en/master/index.html">The Pyramid Web Framework v1.6.dev0</a> »</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="running-a-pyramid-application-under-mod-wsgi">
<span id="modwsgi-tutorial"></span><h1>Running a <span>Pyramid</span> Application under <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt><a class="headerlink" href="http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/modwsgi/index.html#running-a-pyramid-application-under-mod-wsgi" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="http://docs.pylonsproject.org/projects/pyramid/en/master/glossary.html#term-mod-wsgi"><em class="xref std std-term">mod_wsgi</em></a> is an Apache module developed by Graham Dumpleton.
It allows <a class="reference internal" href="http://docs.pylonsproject.org/projects/pyramid/en/master/glossary.html#term-wsgi"><em class="xref std std-term">WSGI</em></a> programs to be served using the Apache web
server.</p>
<p>This guide will outline broad steps that can be used to get a <span>Pyramid</span>
application running under Apache via <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>.  This particular tutorial
was developed under Apple's Mac OS X platform (Snow Leopard, on a 32-bit
Mac), but the instructions should be largely the same for all systems, delta
specific path information for commands and files.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unfortunately these instructions almost certainly won't work for
deploying a <span>Pyramid</span> application on a Windows system using
<tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>.  If you have experience with <span>Pyramid</span> and <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>
on Windows systems, please help us document this experience by submitting
documentation to the <a class="reference external" href="http://groups.google.com/group/pylons-devel">Pylons-devel maillist</a>.</p>
</div>
<ol class="arabic">
<li><p class="first">The tutorial assumes you have Apache already installed on your
system.  If you do not, install Apache 2.X for your platform in
whatever manner makes sense.</p>
</li>
<li><p class="first">Once you have Apache installed, install <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>.  Use the
(excellent) <a class="reference external" href="http://code.google.com/p/modwsgi/wiki/InstallationInstructions">installation instructions</a>
for your platform into your system's Apache installation.</p>
</li>
<li><p class="first">Install <a class="reference internal" href="http://docs.pylonsproject.org/projects/pyramid/en/master/glossary.html#term-virtualenv"><em class="xref std std-term">virtualenv</em></a> into the Python which mod_wsgi will
run using the <tt class="docutils literal"><span class="pre">easy_install</span></tt> program.</p>
<div class="highlight-text"><div class="highlight"><pre>$ sudo /usr/bin/easy_install-2.6 virtualenv
</pre></div>
</div>
<p>This command may need to be performed as the root user.</p>
</li>
<li><p class="first">Create a <a class="reference internal" href="http://docs.pylonsproject.org/projects/pyramid/en/master/glossary.html#term-virtualenv"><em class="xref std std-term">virtualenv</em></a> which we'll use to install our
application.</p>
<div class="highlight-text"><div class="highlight"><pre>$ cd ~
$ mkdir modwsgi
$ cd modwsgi
$ /usr/local/bin/virtualenv env
</pre></div>
</div>
</li>
<li><p class="first">Install <span>Pyramid</span> into the newly created virtualenv:</p>
<div class="highlight-text"><div class="highlight"><pre>$ cd ~/modwsgi/env
$ $VENV/bin/easy_install pyramid
</pre></div>
</div>
</li>
<li><p class="first">Create and install your <span>Pyramid</span> application.  For the purposes of
this tutorial, we'll just be using the <tt class="docutils literal"><span class="pre">pyramid_starter</span></tt> application as
a baseline application.  Substitute your existing <span>Pyramid</span>
application as necessary if you already have one.</p>
<div class="highlight-text"><div class="highlight"><pre>$ cd ~/modwsgi/env
$ $VENV/bin/pcreate -s starter myapp
$ cd myapp
$ $VENV/bin/python setup.py install
</pre></div>
</div>
</li>
<li><p class="first">Within the virtualenv directory (<tt class="docutils literal"><span class="pre">~/modwsgi/env</span></tt>), create a
script named <tt class="docutils literal"><span class="pre">pyramid.wsgi</span></tt>.  Give it these contents:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.paster</span> <span class="kn">import</span> <span class="n">get_app</span><span class="p">,</span> <span class="n">setup_logging</span>
<span class="n">ini_path</span> <span class="o">=</span> <span class="s">'/Users/chrism/modwsgi/env/myapp/production.ini'</span>
<span class="n">setup_logging</span><span class="p">(</span><span class="n">ini_path</span><span class="p">)</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">get_app</span><span class="p">(</span><span class="n">ini_path</span><span class="p">,</span> <span class="s">'main'</span><span class="p">)</span>
</pre></div>
</div>
<p>The first argument to <tt class="docutils literal"><span class="pre">get_app</span></tt> is the project configuration file
name.  It's best to use the <tt class="docutils literal"><span class="pre">production.ini</span></tt> file provided by your
scaffold, as it contains settings appropriate for
production.  The second is the name of the section within the .ini file
that should be loaded by <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>.  The assignment to the name
<tt class="docutils literal"><span class="pre">application</span></tt> is important: mod_wsgi requires finding such an
assignment when it opens the file.</p>
<p>The call to <tt class="docutils literal"><span class="pre">setup_logging</span></tt> initializes the standard library's
<cite>logging</cite> module to allow logging within your application.
See <a class="reference internal" href="http://docs.pylonsproject.org/projects/pyramid/en/master/narr/logging.html#logging-config"><em>Logging Configuration</em></a>.</p>
<p>There is no need to make the <tt class="docutils literal"><span class="pre">pyramid.wsgi</span></tt> script executable.
However, you'll need to make sure that <em>two</em> users have access to change
into the <tt class="docutils literal"><span class="pre">~/modwsgi/env</span></tt> directory: your current user (mine is
<tt class="docutils literal"><span class="pre">chrism</span></tt> and the user that Apache will run as often named <tt class="docutils literal"><span class="pre">apache</span></tt> or
<tt class="docutils literal"><span class="pre">httpd</span></tt>).  Make sure both of these users can "cd" into that directory.</p>
</li>
<li><p class="first">Edit your Apache configuration and add some stuff.  I happened to
create a file named <tt class="docutils literal"><span class="pre">/etc/apache2/other/modwsgi.conf</span></tt> on my own
system while installing Apache, so this stuff went in there.</p>
<div class="highlight-apache"><div class="highlight"><pre><span class="c"># Use only 1 Python sub-interpreter.  Multiple sub-interpreters</span>
<span class="c"># play badly with C extensions.  See</span>
<span class="c"># http://stackoverflow.com/a/10558360/209039</span>
<span class="nb">WSGIApplicationGroup</span> %{GLOBAL}
<span class="nb">WSGIPassAuthorization</span> <span class="k">On</span>
<span class="nb">WSGIDaemonProcess</span> pyramid <span class="k">user</span>=chrism <span class="k">group</span>=staff threads=4 \
   python-path=/Users/chrism/modwsgi/env/lib/python2.6/site-packages
<span class="nb">WSGIScriptAlias</span> <span class="sx">/myapp</span> <span class="sx">/Users/chrism/modwsgi/env/pyramid.wsgi</span>

<span class="nt">&lt;Directory</span> <span class="s">/Users/chrism/modwsgi/env</span><span class="nt">&gt;</span>
  <span class="nb">WSGIProcessGroup</span> pyramid
  <span class="nb">Order</span> allow,deny
  <span class="nb">Allow</span> from <span class="k">all</span>
<span class="nt">&lt;/Directory&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart Apache</p>
<div class="highlight-text"><div class="highlight"><pre>$ sudo /usr/sbin/apachectl restart
</pre></div>
</div>
</li>
<li><p class="first">Visit <tt class="docutils literal"><span class="pre">http://localhost/myapp</span></tt> in a browser.  You should see the
sample application rendered in your browser.</p>
</li>
</ol>
<p><a class="reference internal" href="http://docs.pylonsproject.org/projects/pyramid/en/master/glossary.html#term-mod-wsgi"><em class="xref std std-term">mod_wsgi</em></a> has many knobs and a great variety of deployment
modes.  This is just one representation of how you might use it to
serve up a <span>Pyramid</span> application.  See the <a class="reference external" href="http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines">mod_wsgi
configuration documentation</a> for
more in-depth configuration information.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/wiki/distributing.html" title="previous chapter">Distributing Your Application</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="http://docs.pylonsproject.org/projects/pyramid/en/master/api/index.html" title="next chapter">API Documentation</a></p>
<div id="searchbox">
  <h3>Quick search</h3>
    <form class="search" action="http://docs.pylonsproject.org/projects/pyramid/en/master/search.html" method="get">
      <input type="text" name="q">
      <input type="submit" value="Go">
      <input type="hidden" name="check_keywords" value="yes">
      <input type="hidden" name="area" value="default">
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/genindex.html" title="General Index">index</a></li>
        <li class="right">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/py-modindex.html" title="Python Module Index">modules</a> |</li>
        <li class="right">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/api/index.html" title="API Documentation">next</a> |</li>
        <li class="right">
          <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/wiki/distributing.html" title="Distributing Your Application">previous</a> |</li>
    	<li><a href="http://docs.pylonsproject.org/projects/pyramid/en/master/index.html">The Pyramid Web Framework v1.6.dev0</a> »</li> 
      </ul>
    </div>
    <div class="footer">
        © <a href="http://docs.pylonsproject.org/projects/pyramid/en/master/copyright.html">Copyright</a> 2008-2015, Agendaless Consulting.
      Last updated on Mar 05, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  
<!-- Inserted RTD Footer -->
<div class="injected">

  
  <div class="rst-versions rst-badge" data-toggle="rst-versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book">&nbsp;</span>
      v: master
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      

      
       
      <dl>
        <dt>Versions</dt>
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/modwsgi/index.html">latest</a></dd>
        
        
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/stable/tutorials/modwsgi/index.html">stable</a></dd>
        
        
        
         <strong> 
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/master/tutorials/modwsgi/index.html">master</a></dd>
        
         </strong> 
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/1.5-branch/tutorials/modwsgi/index.html">1.5-branch</a></dd>
        
        
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/tutorials/modwsgi/index.html">1.4-branch</a></dd>
        
        
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/tutorials/modwsgi/index.html">1.3-branch</a></dd>
        
        
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/1.2-branch/tutorials/modwsgi/index.html">1.2-branch</a></dd>
        
        
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/1.1-branch/tutorials/modwsgi/index.html">1.1-branch</a></dd>
        
        
        
        
        
        <dd><a href="http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/tutorials/modwsgi/index.html">1.0-branch</a></dd>
        
        
        
      </dl>
      
      
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="http://readthedocs.org/projects/pyramid/downloads/pdf/master/">PDF</a></dd>
        
        <dd><a href="http://readthedocs.org/projects/pyramid/downloads/htmlzip/master/">HTML</a></dd>
        
        <dd><a href="http://readthedocs.org/projects/pyramid/downloads/epub/master/">Epub</a></dd>
        
      </dl>
      

      <dl>
        <!-- These are kept as relative links for internal installs that are http -->
        <dt>On Read the Docs</dt>
        <dd>
          <a href="http://readthedocs.org/projects/pyramid/">Project Home</a>
        </dd>
        <dd>
          <a href="http://readthedocs.org/builds/pyramid/">Builds</a>
        </dd>
        <dd>
          <a href="http://readthedocs.org/projects/pyramid/downloads/">Downloads</a>
        </dd>
      </dl>

      

      

      
      <dl>
        <dt>On GitHub</dt>
        <dd>
          <a href="https://github.com/Pylons/pyramid/blob/master/docs/tutorials/modwsgi/index.rst">View</a>
        </dd>
        <dd>
          <a href="https://github.com/Pylons/pyramid/edit/master/docs/tutorials/modwsgi/index.rst">Edit</a>
        </dd>
      </dl>
      

      <dl>
        <dt>Search</dt>
        <dd>
          <div style="padding: 6px;">
            <form id="flyout-search-form" class="wy-form" target="_blank" action="https://readthedocs.org/projects/pyramid/search/" method="get">
              <input type="text" name="q" placeholder="Search docs">
              </form>
          </div>
        </dd>
      </dl>



      <hr>
      Free document hosting provided by <a href="https://readthedocs.org/">Read the Docs</a>. Support us on <a href="https://www.gittip.com/readthedocs/">Gittip</a>.

      
    </div>
  </div>
  

</div>
<script id="hiddenlpsubmitdiv" style="display: none;"></script><script>try{for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); if (d) {for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ if (typeof(d.innerText) != 'undefined') { d.innerText=i; } else { d.textContent=i; } } } d.dispatchEvent(customEvent); }form.lpsubmitorig2(); } } }}catch(e){}</script></body></html>